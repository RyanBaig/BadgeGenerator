<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <title>Custom Badges Generator</title>
</head>

<body>
    <header>
        <div class="logo-container">
            <a href="/"><img src="/assets/images/logo.png" alt="BadgeGenerator Logo" width="100px" height="100px"></a>
        </div>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/profile_badges">Profile Badges</a></li>
                <li><a href="/generate_badge">Generate Badge</a></li>
                <li><a href="/about">About Us</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="badge-generator">

            <h2 style="text-align: center;">Custom Badge Generator</h2>


            <div style="text-align: center;" class="badge-preview">
                <h3>Badge Preview</h3>
                <button type="button" id="previewButton" class="cta-button">Preview
                    Badge</button>
                <img id="previewImage" src="" alt="Badge Preview">
                <code id="previewURL" style="font-size: 15px;"></code>
            </div>
            <!-- Provider -->
            <form id="badgeForm">
                <label for="provider">Provider:</label>
                <select id="provider" name="provider">
                    <option value="badgers.space">badgers.space</option>
                    <option value="shields.io">shields.io</option>
                </select>
                <!-- Shields IO-->
                <div id="badgeTypeContainer" style="display: none;">
                    <label for="badgeType">Badge Type:</label>
                    <select id="badgeType" name="badgeType">
                        <option value="color">1 Color</option>
                        <option value="two-colors">Two Colors</option>
                    </select>
                </div>

                <div id="badgeContentInput" style="display: none;">
                    <label for="badgeContent">Badge Content:</label>
                    <input type="text" id="badgeContent" name="badgeContent" placeholder="Text on logo side">
                </div>
                <div id="shieldsOnly" style="display: none;">
                    <label for="label">Label:</label>
                    <input type="text" id="label" name="label" placeholder="Text on color side">



                    <label for="style">Style:</label>
                    <select id="style" name="style">
                        <option value="flat">Flat</option>
                        <option value="flat-square">Flat Square</option>
                        <option value="plastic">Plastic</option>
                        <option value="for-the-badge">For the Badge</option>
                        <option value="social">Social</option>
                    </select>

                    <div>
                        <label for="logo">Logo:</label>
                    </div>
                    <label>Get icon names from <a
                            href="https://github.com/simple-icons/simple-icons/blob/master/slugs.md">Here.</a></label>
                    <input type="text" id="logo" name="logo" placeholder="appveyor">

                    <label for="logoColor">Logo Color:</label>
                    <input type="text" id="logoColor" name="logoColor" placeholder="logocolor">

                    <label for="labelColor">Logo Background Color:</label>
                    <input type="text" id="labelColor" name="labelColor"
                        placeholder="The background color behind the logo">
                    <label for="cacheSeconds">Cache Seconds:</label>
                    <input type="number" id="cacheSeconds" name="cacheSeconds" placeholder="cacheseconds">
                </div>
                <div id="badgersSpaceOnly">
                    <label for="bscolor">Badge Color:</label>
                    <input type="text" id="bscolor" placeholder="The Color for the right side of the badge">

                    <div><label for="bsicons">Logo:</label></div>
                    <div><label>Find the Icon names <a href="https://badgers.space/icons">Here.</a></label></div>
                    <input type="text" id="bsicons"
                        placeholder="The Icon which appears on the left side of badge (gray area)">

                    <label for="bslabel">Label:</label>
                    <input id="bslabel" type="text"
                        placeholder="The Text which appears on the left side of badge (along with icon in gray area)">

                    <label for="bsstatus">Status:</label>
                    <input id="bsstatus" type="text"
                        placeholder="The Text which appears on the right side of badge (coloured area)">

                    <label for="bslabelcolor">Label Color:</label>
                    <input id="bslabelcolor" type="text"
                        placeholder="The Color for label color on the right side of badge (colored area)">

                    <div><label for="bsscale">Badge Scale:</label></div>
                    <input id="bsscale" type="number" placeholder="The Size of the Badge (default: 1)">

                    <div><label for="bstheme">Badge Theme</label></div>
                    <div><label>See Themes:</div>
                    <div> Honey: <img src="https://honey.badgers.space/theme/honey">,</label></div>
                    <div><label>Tailwind: <img src="https://honey.badgers.space/theme/tailwind">,</label></div>
                    <div><label>and BadGen: <img src="https://honey.badgers.space/theme/badgen"></label></div>
                    <input id="bstheme" type="text" placeholder="The Theme of the Badge (default: Honey)">

                    <div><label for="bsiconwidth">Icon Width:</label></div>
                    <input id="bsiconwidth" type="number" placeholder="Width of the Icon">

                    <div><label for="bscornerradius">Badge Corner Radius:</label></div>
                    <input id="bscornerradius" type="number"
                        placeholder="The factor which defines how rounded the corners are">

                    <div><label for="bscache">Cache Duration:</label></div>
                    <input id="bscache" type="number" placeholder="The Cache">
                </div>
            </form>
        </section>
    </main>
    <script>
        const providerSelect = document.getElementById('provider');
        const badgeTypeContainer = document.getElementById('badgeTypeContainer');
        const badgeContentInput = document.getElementById('badgeContentInput');
        const shieldsOnlyFields = document.getElementById('shieldsOnly');
        const badgeTypeSelect = document.getElementById('badgeType');
        const previewButton = document.getElementById('previewButton');
        const previewImage = document.getElementById('previewImage');
        const previewURL = document.getElementById('previewURL');
        const badgeForm = document.getElementById('badgeForm');
        const badgersSpaceOnly = document.getElementById("badgersSpaceOnly");

        providerSelect.addEventListener('change', function () {
            if (providerSelect.value === 'shields.io') {
                badgeTypeContainer.style.display = 'block';
                badgeContentInput.style.display = badgeTypeSelect.value === 'two-colors' ? 'block' : 'none';
                shieldsOnlyFields.style.display = 'block';
                badgersSpaceOnly.style.display = "none";
            } else if (providerSelect.value === 'badgers.space') {
                badgeTypeContainer.style.display = 'none';
                badgeContentInput.style.display = 'none';
                shieldsOnlyFields.style.display = 'none';
                badgersSpaceOnly.style.display = "block";
            } else {
                badgeTypeContainer.style.display = 'none';
                badgeContentInput.style.display = 'none';
                shieldsOnlyFields.style.display = 'none';
                statusLabel.style.display = 'none'; // Show the status label
                colorLabel.style.display = 'none'; // Show the color label
                statusInput.style.display = 'none'; // Show the status input
                colorInput.style.display = 'none'; // Show the color input
            }
        });

        badgeTypeSelect.addEventListener('change', function () {
            badgeContentInput.style.display = badgeTypeSelect.value === 'two-colors' ? 'block' : 'none';
        });

        previewButton.addEventListener('click', function () {
            const formData = new FormData(badgeForm);
            const params = new URLSearchParams(formData);
            params.delete('provider');
            console.log(`FORMDATA: ${formData} && PARAMS: ${params}`)// How is the formdata/params var populated?
        

            const isShieldsIoProvider = providerSelect.value === 'shields.io';
            const isBadgersSpaceProvider = providerSelect.value === 'badgers.space';
            if (isShieldsIoProvider) {
                let badgeUrl =
                    `https://img.shields.io/badge/${params.get('badgeContent')}-${params.get('label')}-${params.get('color').replace('#', '')}`;
                const style = params.get('style');
                const logo = params.get('logo');
                const logoColor = params.get('logoColor');
                const labelColor = params.get('labelColor');
                const cacheSeconds = params.get('cacheSeconds');

                if (style) badgeUrl += `?style=${style}`;
                if (logo) badgeUrl += `&logo=${logo}`;
                if (logoColor) badgeUrl += `&logoColor=${logoColor}`;
                if (labelColor) badgeUrl += `&labelColor=${labelColor}`;
                if (cacheSeconds) badgeUrl += `&cacheSeconds=${cacheSeconds}`;

                if (badgeTypeSelect.value === 'two-colors') {
                    badgeUrl += `&color&color=${params.get('color')}`;
                }

                previewImage.src = badgeUrl;
                previewURL.innerHTML = badgeUrl;

            } else if (isBadgersSpaceProvider) {
                const bslabel = document.getElementById('bslabel').value;
                const bsstatus = document.getElementById('bsstatus').value;
                const bscolor = document.getElementById('bscolor').value;

                if (!bslabel || !bsstatus || !bscolor) {
                    alert('Please enter all required fields. (Label, Status, Color)');
                }


                let badgeUrl = `https://badgers.space/badge/${bslabel}/${bsstatus}/${bscolor}`;
                const labelcolor = document.getElementById('bslabelcolor').value;
                const scale = document.getElementById('bsscale').value;
                const theme = document.getElementById('bstheme').value;
                const iconwidth = document.getElementById('bsiconwidth').value;
                const cache = document.getElementById('bscache').value;
                const icon = document.getElementById('bsicons').value;
                const cornerradius = document.getElementById('bscornerradius').value;

                if (icon) badgeUrl += `?icon=${icon}`;
                if (labelcolor) badgeUrl += `&labelcolor=${labelcolor}`;
                if (scale) badgeUrl += `&scale=${scale}`;
                if (theme) badgeUrl += `&theme=${theme}`;
                if (iconwidth) badgeUrl += `&iconwidth=${iconwidth}`;
                if (cache) badgeUrl += `&cache=${cache}`;
                if (cornerradius) badgeUrl += `&corner_radius=${cornerradius}`;

                previewImage.src = badgeUrl;
                previewURL.innerHTML = badgeUrl;
            }
        });
    </script>

</body>

</html>